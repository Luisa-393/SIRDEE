<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Abrir Cámara con HTML5</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <div class="container mt-5">
        <h2>Abrir Cámara del Móvil</h2>
        <video id="video" width="640" height="480" autoplay></video>
        <br>
        <button id="boton" class="btn btn-primary">Iniciar Cámara</button>
    </div>

    <script>
        const video = document.getElementById('video');
const boton = document.getElementById('boton');

boton.addEventListener('click', () => {
    if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
        navigator.mediaDevices.getUserMedia({ video: true })
            .then((stream) => {
                video.srcObject = stream;
                video.play();
            })
            .catch((error) => {
                console.error("Error al acceder a la cámara: ", error);
            });
    } else {
        alert("La API de acceso a la cámara no está soportada en este navegador.");
    }
    // cambiar a camara trasera si es posible
    if (navigator.mediaDevices && navigator.mediaDevices.enumerateDevices) {
        navigator.mediaDevices.enumerateDevices().then((devices) => {
            devices.forEach((device) => {
                if (device.kind === 'videoinput' && device.label.toLowerCase().includes('back')) {
                    navigator.mediaDevices.getUserMedia({ video: { deviceId: device.deviceId } })
                        .then((stream) => {
                            video.srcObject = stream;
                            video.play();
                        })
                        .catch((error) => {
                            console.error("Error al acceder a la cámara trasera: ", error);
                        });
                }
            });
        });
    }
});   
    </script>
</body>
</html>   
